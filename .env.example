# ========================================
# Frontend Environment Variables
# ========================================

# Foundry Endpoint (opcional, tiene fallback por defecto)
# El endpoint debe coincidir con tu recurso de Azure AI Foundry
VITE_FOUNDRY_ENDPOINT=https://tenerife-winter-resource.services.ai.azure.com/api/projects/tenerife-winter/applications/campaign-impact-hub/protocols/activityprotocol?api-version=2025-11-15-preview

# API Key de Foundry (SOLO si usas modo directo, NO RECOMENDADO)
# ⚠️ IMPORTANTE: NO uses esto en producción, expone tu API key en el frontend
# Solo para pruebas locales rápidas sin proxy
# VITE_FOUNDRY_API_KEY=tu-api-key-aqui

# Usar proxy backend (RECOMENDADO: true)
# Si es true, el frontend llamará a /api/run en lugar de Foundry directamente
# Esto evita exponer la API key y problemas de CORS
VITE_USE_PROXY=true

# ========================================
# Backend Environment Variables
# (Para tu servidor Node.js/Express/Vercel/Netlify)
# ========================================

# API Key de Foundry (DEBE estar en el servidor, NO en el frontend)
# Obtén esta key desde Azure Portal -> Tu recurso de AI Foundry -> Keys
# ⚠️ CRÍTICO: Esta variable NUNCA debe tener el prefijo VITE_
FOUNDRY_API_KEY=tu-api-key-de-azure-foundry

# Puerto del servidor proxy (opcional, default: 3001)
PORT=3001

# ========================================
# Modos de uso
# ========================================

# MODO RECOMENDADO (Producción):
# VITE_USE_PROXY=true
# FOUNDRY_API_KEY=<tu-key> (en servidor)
# Frontend -> /api/run (proxy) -> Foundry
# ✅ Seguro, sin CORS, API key protegida

# MODO DIRECTO (Solo desarrollo local):
# VITE_USE_PROXY=false
# VITE_FOUNDRY_API_KEY=<tu-key>
# Frontend -> Foundry (directo)
# ⚠️ Puede fallar por CORS, expone API key, solo para testing

# ========================================
# Verificación
# ========================================

# Para verificar tu configuración, ejecuta:
#   npm run check
#
# Para probar el proxy, ejecuta:
#   npm run test:proxy
#
# Para iniciar el servidor proxy:
#   npm run proxy
#
# Para iniciar frontend + proxy juntos:
#   npm run dev:all

# ========================================
# Troubleshooting
# ========================================

# Error 401/403:
# - Verifica que FOUNDRY_API_KEY esté configurada (en servidor si usas proxy)
# - Verifica que la key sea válida en Azure Portal
# - Verifica que el endpoint sea correcto para tu región

# Error 404 en /api/run:
# - El proxy backend no está corriendo
# - Ejecuta: npm run proxy
# - O configura VITE_USE_PROXY=false temporalmente (solo dev)

# Error CORS:
# - Usa VITE_USE_PROXY=true
# - El modo directo no funciona bien por CORS en producción

# ========================================
# Deployment
# ========================================

# Vercel:
# - Crea api/run.js (ya incluido en el proyecto)
# - En Settings -> Environment Variables, añade FOUNDRY_API_KEY
# - El endpoint /api/run estará disponible automáticamente

# Netlify:
# - Crea netlify/functions/run.js (ya incluido)
# - En Site Settings -> Environment Variables, añade FOUNDRY_API_KEY
# - Usa /.netlify/functions/run como endpoint

# Node.js/Express:
# - Crea .env con FOUNDRY_API_KEY
# - Ejecuta: npm run proxy
# - El proxy estará en http://localhost:3001/api/run

# Para más detalles, consulta:
# - PROXY_BACKEND_GUIDE.md - Guía técnica completa
# - DEPLOYMENT_PROXY.md - Deployment en diferentes plataformas
# - QUICKSTART_PROXY.md - Configuración rápida en 5 minutos
